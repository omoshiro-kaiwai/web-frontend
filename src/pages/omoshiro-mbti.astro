---
// ãŠã‚‚ã—ã‚MBTIè¨ºæ–­ãƒšãƒ¼ã‚¸
const mbtiTypes = {
  'BPPP': { name: 'ãƒ‘ãƒƒã‚·ãƒ§ãƒ³ãƒœã‚±', description: 'ãƒ‘ãƒ¯ãƒ•ãƒ«ã§æƒ…ç†±çš„ãªãƒœã‚±ã‚­ãƒ£ãƒ©ã€‚å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹å¤©æ‰ï¼' },
  'BPPA': { name: 'ã‚¢ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãƒœã‚±', description: 'æ”»æ’ƒçš„ãªç¬‘ã„ã§å‘¨å›²ã‚’å·»ãè¾¼ã‚€ãƒœã‚±ã®æˆ¦å£«ã€‚' },
  'BPCP': { name: 'ã‚¯ãƒ¼ãƒ«ãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã«æ±ºã‚ã‚‹ãƒœã‚±ã€‚è¨ˆç®—ã•ã‚ŒãŸãŠã‚‚ã—ã‚ã•ãŒé­…åŠ›ã€‚' },
  'BPCA': { name: 'ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãƒœã‚±', description: 'å†·é™æ²ˆç€ã«æ”»ã‚ã‚‹ãƒœã‚±ã€‚ã˜ã‚ã˜ã‚ç¬‘ã„ã‚’å–ã‚‹ã€‚' },
  'BSPP': { name: 'ã‚»ãƒ³ã‚¹ãƒœã‚±', description: 'ã‚»ãƒ³ã‚¹ã§å‹è² ã™ã‚‹å¹³å’Œä¸»ç¾©ãƒœã‚±ã€‚è¨€è‘‰ã®ã‚»ãƒ³ã‚¹ãŒå…‰ã‚‹ã€‚' },
  'BSPA': { name: 'ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒœã‚±', description: 'ã‚»ãƒ³ã‚¹ã¨æ”»æ’ƒæ€§ã‚’ä½µã›æŒã¤èŠ¸è¡“æ´¾ãƒœã‚±ã€‚' },
  'BSCP': { name: 'ã‚¤ãƒ³ãƒ†ãƒªãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã§ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªçŸ¥çš„ãƒœã‚±ã€‚é«˜åº¦ãªç¬‘ã„ã‚’è¿½æ±‚ã€‚' },
  'BSCA': { name: 'ã‚·ãƒ‹ã‚«ãƒ«ãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã«æ”»ã‚ã‚‹ã‚»ãƒ³ã‚¹æ´¾ã€‚çš®è‚‰ã¨ã‚¦ã‚£ãƒƒãƒˆãŒæ­¦å™¨ã€‚' },
  'TPPP': { name: 'ãƒã‚¤ãƒ‘ãƒ¼ãƒ„ãƒƒã‚³ãƒŸ', description: 'ãƒ‘ãƒ¯ãƒ•ãƒ«ã§æƒ…ç†±çš„ãªãƒ„ãƒƒã‚³ãƒŸã€‚åœ§å€’çš„ãªå­˜åœ¨æ„Ÿï¼' },
  'TPPA': { name: 'ã‚¢ã‚¿ãƒƒã‚«ãƒ¼ãƒ„ãƒƒã‚³ãƒŸ', description: 'æ”»æ’ƒçš„ãªãƒ„ãƒƒã‚³ãƒŸã§å ´ã‚’æ”¯é…ã™ã‚‹ã€‚å®¹èµ¦ãªã—ï¼' },
  'TPCP': { name: 'ã‚¹ãƒãƒ¼ãƒˆãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã«æ±ºã‚ã‚‹ãƒ„ãƒƒã‚³ãƒŸã€‚ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãªæŒ‡æ‘˜ã€‚' },
  'TPCA': { name: 'ã‚·ãƒ£ãƒ¼ãƒ—ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã‹ã¤é‹­ã„ãƒ„ãƒƒã‚³ãƒŸã€‚ä¸€åˆ€ä¸¡æ–­ã®åˆ‡ã‚Œå‘³ã€‚' },
  'TSPP': { name: 'ã‚„ã•ã—ã„ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚»ãƒ³ã‚¹ã¨å„ªã—ã•ã®ãƒ„ãƒƒã‚³ãƒŸã€‚äººã‚’å‚·ã¤ã‘ãªã„ç¬‘ã„ã€‚' },
  'TSPA': { name: 'ã‚¹ãƒãƒƒã‚·ãƒ¥ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚»ãƒ³ã‚¹ã§é‹­ãæ”»ã‚ã‚‹ãƒ„ãƒƒã‚³ãƒŸã€‚è¨€è‘‰ã®é”äººã€‚' },
  'TSCP': { name: 'ã‚¸ã‚§ãƒ³ãƒˆãƒ«ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã§ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ„ãƒƒã‚³ãƒŸã€‚å¤§äººã®ä½™è£•ã€‚' },
  'TSCA': { name: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«Ã—ã‚»ãƒ³ã‚¹Ã—ã‚¢ã‚¿ãƒƒã‚¯ã®å®Œç’§ä¸»ç¾©ãƒ„ãƒƒã‚³ãƒŸã€‚' },
};
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãŠã‚‚ã—ã‚MBTIè¨ºæ–­</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 3rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      margin-bottom: 30px;
    }

    .start-section {
      text-align: center;
    }

    .start-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 20px 60px;
      border-radius: 30px;
      font-size: 1.5rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .start-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
    }

    .start-description {
      font-size: 1.1rem;
      color: #666;
      margin: 20px 0 40px;
      line-height: 1.8;
    }

    .question-section {
      display: none;
    }

    .question-section.active {
      display: block;
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      color: #666;
      font-size: 0.9rem;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 10px;
      margin-bottom: 30px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
      border-radius: 10px;
    }

    .question-number {
      font-size: 1rem;
      color: #667eea;
      font-weight: bold;
      margin-bottom: 15px;
    }

    .question-text {
      font-size: 1.3rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .likert-scale {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .scale-labels {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 0.9rem;
      color: #666;
    }

    .scale-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .scale-option {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .scale-option:hover {
      transform: scale(1.1);
    }

    .scale-circle {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 3px solid #d0d0d0;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .scale-option input[type="radio"] {
      display: none;
    }

    .scale-option input[type="radio"]:checked + .scale-circle {
      border-color: #667eea;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
    }

    .scale-option input[type="radio"]:checked + .scale-circle::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
    }

    .scale-label {
      margin-top: 8px;
      font-size: 0.75rem;
      color: #999;
      text-align: center;
    }

    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      gap: 15px;
    }

    .nav-btn {
      padding: 12px 30px;
      border-radius: 30px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
    }

    .prev-btn {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }

    .prev-btn:hover:not(:disabled) {
      background: #f5f5f5;
    }

    .next-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .next-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .result-section {
      display: none;
      text-align: center;
    }

    .result-section.active {
      display: block;
      animation: fadeIn 0.5s ease-in;
    }

    .result-type {
      font-size: 2.5rem;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 20px;
    }

    .result-image {
      width: 300px;
      height: 300px;
      margin: 30px auto;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: #666;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .result-description {
      font-size: 1.2rem;
      color: #555;
      line-height: 1.8;
      margin-bottom: 30px;
    }

    .result-code {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 30px;
    }

    .restart-btn {
      background: white;
      color: #667eea;
      border: 3px solid #667eea;
      padding: 15px 40px;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .restart-btn:hover {
      background: #667eea;
      color: white;
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 2rem;
      }

      .card {
        padding: 25px;
      }

      .scale-circle {
        width: 40px;
        height: 40px;
      }

      .scale-option input[type="radio"]:checked + .scale-circle::after {
        width: 15px;
        height: 15px;
      }

      .scale-label {
        font-size: 0.65rem;
      }

      .question-text {
        font-size: 1.1rem;
      }

      .result-image {
        width: 250px;
        height: 250px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ­ ãŠã‚‚ã—ã‚MBTIè¨ºæ–­</h1>
      <p>ã‚ãªãŸã®ãŠã‚‚ã—ã‚ã‚¿ã‚¤ãƒ—ã‚’è¨ºæ–­ã—ã¾ã™</p>
    </div>

    <div class="card">
      <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
      <div class="start-section" id="startSection">
        <h2 class="question-text">ã‚ãªãŸã¯ã©ã®ã‚¿ã‚¤ãƒ—ï¼Ÿ</h2>
        <p class="start-description">
          30ã®è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã®ã€ŒãŠã‚‚ã—ã‚ã‚¿ã‚¤ãƒ—ã€ã‚’è¨ºæ–­ã—ã¾ã™ã€‚<br>
          ãƒœã‚±æ´¾ï¼Ÿãƒ„ãƒƒã‚³ãƒŸæ´¾ï¼Ÿãƒ‘ãƒ¯ãƒ¼ç³»ï¼Ÿã‚»ãƒ³ã‚¹ç³»ï¼Ÿ<br>
          å„è³ªå•ã«7æ®µéšã§ç­”ãˆã¦ãã ã•ã„ã€‚
        </p>
        <button class="start-btn" onclick="startTest()">è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
      </div>

      <!-- è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="question-section" id="questionSection">
        <div class="progress-info">
          <span id="questionCounter">è³ªå• 1 / 30</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="question-number" id="questionNumber">Q1</div>
        <div class="question-text" id="questionText"></div>

        <div class="likert-scale">
          <div class="scale-labels">
            <span>ãã†æ€ã†</span>
            <span>ãã†æ€ã‚ãªã„</span>
          </div>
          <div class="scale-options" id="scaleOptions">
            <label class="scale-option">
              <input type="radio" name="answer" value="7">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="6">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="5">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="4">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="3">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="2">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
            <label class="scale-option">
              <input type="radio" name="answer" value="1">
              <div class="scale-circle"></div>
              <div class="scale-label"></div>
            </label>
          </div>
        </div>

        <div class="nav-buttons">
          <button class="nav-btn prev-btn" id="prevBtn" onclick="previousQuestion()">â† å‰ã¸</button>
          <button class="nav-btn next-btn" id="nextBtn" onclick="nextQuestion()" disabled>æ¬¡ã¸ â†’</button>
        </div>
      </div>

      <!-- çµæœè¡¨ç¤º -->
      <div class="result-section" id="resultSection">
        <h2 class="question-text">è¨ºæ–­çµæœ</h2>
        <div class="result-code" id="resultCode"></div>
        <div class="result-type" id="resultType"></div>
        <div class="result-image">
          <img id="resultImage" src="" alt="è¨ºæ–­çµæœã‚¤ãƒ©ã‚¹ãƒˆ" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 20px;">
          <span id="resultPlaceholder">ã‚¤ãƒ©ã‚¹ãƒˆã‚’ã“ã“ã«é…ç½®</span>
        </div>
        <p class="result-description" id="resultDescription"></p>
        <button class="restart-btn" onclick="restart()">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <script define:inline>
    const mbtiTypes = {
      'BPPP': { name: 'ãƒ‘ãƒƒã‚·ãƒ§ãƒ³ãƒœã‚±', description: 'ãƒ‘ãƒ¯ãƒ•ãƒ«ã§æƒ…ç†±çš„ãªãƒœã‚±ã‚­ãƒ£ãƒ©ã€‚å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹å¤©æ‰ï¼' },
      'BPPA': { name: 'ã‚¢ã‚°ãƒ¬ãƒƒã‚·ãƒ–ãƒœã‚±', description: 'æ”»æ’ƒçš„ãªç¬‘ã„ã§å‘¨å›²ã‚’å·»ãè¾¼ã‚€ãƒœã‚±ã®æˆ¦å£«ã€‚' },
      'BPCP': { name: 'ã‚¯ãƒ¼ãƒ«ãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã«æ±ºã‚ã‚‹ãƒœã‚±ã€‚è¨ˆç®—ã•ã‚ŒãŸãŠã‚‚ã—ã‚ã•ãŒé­…åŠ›ã€‚' },
      'BPCA': { name: 'ã‚¹ãƒˆã‚¤ãƒƒã‚¯ãƒœã‚±', description: 'å†·é™æ²ˆç€ã«æ”»ã‚ã‚‹ãƒœã‚±ã€‚ã˜ã‚ã˜ã‚ç¬‘ã„ã‚’å–ã‚‹ã€‚' },
      'BSPP': { name: 'ã‚»ãƒ³ã‚¹ãƒœã‚±', description: 'ã‚»ãƒ³ã‚¹ã§å‹è² ã™ã‚‹å¹³å’Œä¸»ç¾©ãƒœã‚±ã€‚è¨€è‘‰ã®ã‚»ãƒ³ã‚¹ãŒå…‰ã‚‹ã€‚' },
      'BSPA': { name: 'ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒœã‚±', description: 'ã‚»ãƒ³ã‚¹ã¨æ”»æ’ƒæ€§ã‚’ä½µã›æŒã¤èŠ¸è¡“æ´¾ãƒœã‚±ã€‚' },
      'BSCP': { name: 'ã‚¤ãƒ³ãƒ†ãƒªãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã§ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªçŸ¥çš„ãƒœã‚±ã€‚é«˜åº¦ãªç¬‘ã„ã‚’è¿½æ±‚ã€‚' },
      'BSCA': { name: 'ã‚·ãƒ‹ã‚«ãƒ«ãƒœã‚±', description: 'ã‚¯ãƒ¼ãƒ«ã«æ”»ã‚ã‚‹ã‚»ãƒ³ã‚¹æ´¾ã€‚çš®è‚‰ã¨ã‚¦ã‚£ãƒƒãƒˆãŒæ­¦å™¨ã€‚' },
      'TPPP': { name: 'ãƒã‚¤ãƒ‘ãƒ¼ãƒ„ãƒƒã‚³ãƒŸ', description: 'ãƒ‘ãƒ¯ãƒ•ãƒ«ã§æƒ…ç†±çš„ãªãƒ„ãƒƒã‚³ãƒŸã€‚åœ§å€’çš„ãªå­˜åœ¨æ„Ÿï¼' },
      'TPPA': { name: 'ã‚¢ã‚¿ãƒƒã‚«ãƒ¼ãƒ„ãƒƒã‚³ãƒŸ', description: 'æ”»æ’ƒçš„ãªãƒ„ãƒƒã‚³ãƒŸã§å ´ã‚’æ”¯é…ã™ã‚‹ã€‚å®¹èµ¦ãªã—ï¼' },
      'TPCP': { name: 'ã‚¹ãƒãƒ¼ãƒˆãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã«æ±ºã‚ã‚‹ãƒ„ãƒƒã‚³ãƒŸã€‚ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ãªæŒ‡æ‘˜ã€‚' },
      'TPCA': { name: 'ã‚·ãƒ£ãƒ¼ãƒ—ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã‹ã¤é‹­ã„ãƒ„ãƒƒã‚³ãƒŸã€‚ä¸€åˆ€ä¸¡æ–­ã®åˆ‡ã‚Œå‘³ã€‚' },
      'TSPP': { name: 'ã‚„ã•ã—ã„ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚»ãƒ³ã‚¹ã¨å„ªã—ã•ã®ãƒ„ãƒƒã‚³ãƒŸã€‚äººã‚’å‚·ã¤ã‘ãªã„ç¬‘ã„ã€‚' },
      'TSPA': { name: 'ã‚¹ãƒãƒƒã‚·ãƒ¥ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚»ãƒ³ã‚¹ã§é‹­ãæ”»ã‚ã‚‹ãƒ„ãƒƒã‚³ãƒŸã€‚è¨€è‘‰ã®é”äººã€‚' },
      'TSCP': { name: 'ã‚¸ã‚§ãƒ³ãƒˆãƒ«ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«ã§ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ„ãƒƒã‚³ãƒŸã€‚å¤§äººã®ä½™è£•ã€‚' },
      'TSCA': { name: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ„ãƒƒã‚³ãƒŸ', description: 'ã‚¯ãƒ¼ãƒ«Ã—ã‚»ãƒ³ã‚¹Ã—ã‚¢ã‚¿ãƒƒã‚¯ã®å®Œç’§ä¸»ç¾©ãƒ„ãƒƒã‚³ãƒŸã€‚' },
    };

    // è³ªå•ãƒ‡ãƒ¼ã‚¿ï¼ˆdimension: B/T, P/S, P/C, P/Aï¼‰
    // reverse: true ã®å ´åˆã€ã‚¹ã‚³ã‚¢ã‚’åè»¢ï¼ˆ1â†’7, 2â†’6...ï¼‰
    const questions = [
      // ãƒœã‚±(B) vs ãƒ„ãƒƒã‚³ãƒŸ(T) - 8å•
      { text: 'äººã‚’ç¬‘ã‚ã›ã‚‹ã‚ˆã‚Šã€ç¬‘ã„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¦‹æ¥µã‚ã‚‹æ–¹ãŒå¾—æ„ã ã€‚', dimension: 'BT', reverse: true },
      { text: 'äºˆæƒ³å¤–ã®è¡Œå‹•ã‚„ç™ºè¨€ã§å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹ã“ã¨ãŒå¤šã„ã€‚', dimension: 'BT', reverse: false },
      { text: 'èª°ã‹ãŒãƒœã‚±ãŸã¨ãã€ã™ã‹ã•ãšãƒ„ãƒƒã‚³ãƒŸã‚’å…¥ã‚ŒãŸããªã‚‹ã€‚', dimension: 'BT', reverse: true },
      { text: 'è‡ªåˆ†ã‹ã‚‰ç‡å…ˆã—ã¦é¢ç™½ã„ã“ã¨ã‚’ã™ã‚‹ã®ãŒå¥½ãã ã€‚', dimension: 'BT', reverse: false },
      { text: 'ä»–äººã®è¨€å‹•ã®çŸ›ç›¾ã‚„é¢ç™½ã•ã«æ°—ã¥ãã‚„ã™ã„ã€‚', dimension: 'BT', reverse: true },
      { text: 'å¤‰ãªã“ã¨ã‚’è¨€ã£ã¦å‘¨ã‚Šã‚’é©šã‹ã›ã‚‹ã®ãŒæ¥½ã—ã„ã€‚', dimension: 'BT', reverse: false },
      { text: 'è©±ã®æµã‚Œã‚’æ•´ç†ã—ãŸã‚Šã€çš„ç¢ºã«ã¾ã¨ã‚ã‚‹ã®ãŒå¾—æ„ã ã€‚', dimension: 'BT', reverse: true },
      { text: 'ãµã–ã‘ãŸã‚Šã€ãŠã©ã‘ãŸã‚Šã™ã‚‹ã“ã¨ã«æŠµæŠ—ãŒãªã„ã€‚', dimension: 'BT', reverse: false },
      
      // ãƒ‘ãƒ¯ãƒ¼(P) vs ã‚»ãƒ³ã‚¹(S) - 8å•
      { text: 'é™ã‹ã«è¨€è‘‰ã‚’é¸ã¶ã‚ˆã‚Šã€å‹¢ã„ã§ç¬‘ã„ã‚’å–ã‚ŠãŸã„ã€‚', dimension: 'PS', reverse: false },
      { text: 'è¨€è‘‰ã®ãƒãƒ§ã‚¤ã‚¹ã‚„è¨€ã„å›ã—ã«ã“ã ã‚ã‚‹æ–¹ã ã€‚', dimension: 'PS', reverse: true },
      { text: 'å¤§ããªå£°ã‚„èº«ä½“ã‚’ä½¿ã£ãŸè¡¨ç¾ãŒå¾—æ„ã ã€‚', dimension: 'PS', reverse: false },
      { text: 'çŸ¥çš„ã§æ´—ç·´ã•ã‚ŒãŸç¬‘ã„ã«é­…åŠ›ã‚’æ„Ÿã˜ã‚‹ã€‚', dimension: 'PS', reverse: true },
      { text: 'ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã§å ´ã‚’å‹•ã‹ã™ã‚¿ã‚¤ãƒ—ã ã€‚', dimension: 'PS', reverse: false },
      { text: 'å¾®å¦™ãªãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚„è¨€è‘‰éŠã³ã§ç¬‘ã‚ã›ãŸã„ã€‚', dimension: 'PS', reverse: true },
      { text: 'è¿«åŠ›ã‚„å‹¢ã„ãŒç¬‘ã„ã«ã¯é‡è¦ã ã¨æ€ã†ã€‚', dimension: 'PS', reverse: false },
      { text: 'ãƒ¦ãƒ¼ãƒ¢ã‚¢ã®ã‚»ãƒ³ã‚¹ã¯çŸ¥æ€§ã‹ã‚‰ç”Ÿã¾ã‚Œã‚‹ã¨æ€ã†ã€‚', dimension: 'PS', reverse: true },
      
      // ãƒ‘ãƒƒã‚·ãƒ§ãƒ³(P) vs ã‚¯ãƒ¼ãƒ«(C) - 7å•
      { text: 'æ„Ÿæƒ…ã‚’è¡¨ã«å‡ºã—ã¦ç¬‘ã„ã‚’å±Šã‘ã‚‹ã®ãŒå¥½ãã ã€‚', dimension: 'PC', reverse: false },
      { text: 'å†·é™ã«ã€è½ã¡ç€ã„ãŸãƒˆãƒ¼ãƒ³ã§é¢ç™½ã„ã“ã¨ã‚’è¨€ã„ãŸã„ã€‚', dimension: 'PC', reverse: true },
      { text: 'ç†±é‡é«˜ãã€ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸Šã’ã¦ç¬‘ã„ã‚’ä½œã‚‹æ–¹ã ã€‚', dimension: 'PC', reverse: false },
      { text: 'æ·¡ã€…ã¨ã€ã‚ãˆã¦æ„Ÿæƒ…ã‚’æŠ‘ãˆãŸæ–¹ãŒé¢ç™½ã„ã¨æ€ã†ã€‚', dimension: 'PC', reverse: true },
      { text: 'æƒ…ç†±çš„ã«ã€å…¨åŠ›ã§ç¬‘ã„ã«å‘ãåˆã„ãŸã„ã€‚', dimension: 'PC', reverse: false },
      { text: 'ã‚¯ãƒ¼ãƒ«ã«æ±ºã‚ãŸæ–¹ãŒã‚«ãƒƒã‚³ã„ã„ç¬‘ã„ã«ãªã‚‹ã€‚', dimension: 'PC', reverse: true },
      { text: 'æ„Ÿæƒ…ã®èµ·ä¼ãŒæ¿€ã—ã„æ–¹ãŒç¬‘ã„ãŒç”Ÿã¾ã‚Œã‚„ã™ã„ã€‚', dimension: 'PC', reverse: false },
      
      // ãƒ”ãƒ¼ã‚¹(P) vs ã‚¢ã‚¿ãƒƒã‚¯(A) - 7å•
      { text: 'ã¿ã‚“ãªãŒæ¥½ã—ã‚ã‚‹å„ªã—ã„ç¬‘ã„ã‚’å¿ƒãŒã‘ã¦ã„ã‚‹ã€‚', dimension: 'PA', reverse: false },
      { text: 'å¤šå°‘åˆºæ¿€çš„ã§ã‚‚ã€é‹­ãæ”»ã‚ãŸç¬‘ã„ãŒå¥½ãã ã€‚', dimension: 'PA', reverse: true },
      { text: 'èª°ã‚‚å‚·ã¤ã‘ãªã„ã€å¹³å’Œãªç¬‘ã„ã‚’å¤§åˆ‡ã«ã—ãŸã„ã€‚', dimension: 'PA', reverse: false },
      { text: 'æ”»æ’ƒçš„ãªãƒ„ãƒƒã‚³ãƒŸã‚„ãƒœã‚±ã«ã“ãç¬‘ã„ã®æœ¬è³ªãŒã‚ã‚‹ã€‚', dimension: 'PA', reverse: true },
      { text: 'å’Œã‚„ã‹ãªé›°å›²æ°—ã‚’ä½œã‚‹ã“ã¨ã‚’å„ªå…ˆã™ã‚‹ã€‚', dimension: 'PA', reverse: false },
      { text: 'æ¯’ã®ã‚ã‚‹ç¬‘ã„ã®æ–¹ãŒå°è±¡ã«æ®‹ã‚‹ã¨æ€ã†ã€‚', dimension: 'PA', reverse: true },
      { text: 'å…¨å“¡ãŒç¬‘é¡”ã«ãªã‚Œã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã€‚', dimension: 'PA', reverse: false },
    ];

    let currentQuestionIndex = 0;
    let answers = new Array(30).fill(null);

    function startTest() {
      document.getElementById('startSection').style.display = 'none';
      document.getElementById('questionSection').style.display = 'block';
      showQuestion(0);
    }

    function showQuestion(index) {
      currentQuestionIndex = index;
      const question = questions[index];
      
      document.getElementById('questionNumber').textContent = `Q${index + 1}`;
      document.getElementById('questionText').textContent = question.text;
      document.getElementById('questionCounter').textContent = `è³ªå• ${index + 1} / 30`;
      
      // é€²æ—ãƒãƒ¼æ›´æ–°
      const progress = ((index + 1) / 30) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
      
      // å‰ã®å›ç­”ã‚’å¾©å…ƒ
      const radios = document.querySelectorAll('input[name="answer"]');
      radios.forEach(radio => {
        radio.checked = false;
        if (answers[index] && radio.value === answers[index].toString()) {
          radio.checked = true;
        }
      });
      
      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
      updateButtons();
    }

    function updateButtons() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      
      prevBtn.disabled = currentQuestionIndex === 0;
      
      const answered = answers[currentQuestionIndex] !== null;
      nextBtn.disabled = !answered;
      
      if (currentQuestionIndex === 29) {
        nextBtn.textContent = 'çµæœã‚’è¦‹ã‚‹';
      } else {
        nextBtn.textContent = 'æ¬¡ã¸ â†’';
      }
    }

    // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®å¤‰æ›´ã‚’ç›£è¦–
    document.addEventListener('change', (e) => {
      if (e.target.name === 'answer') {
        answers[currentQuestionIndex] = parseInt(e.target.value);
        updateButtons();
      }
    });

    function nextQuestion() {
      if (answers[currentQuestionIndex] === null) return;
      
      if (currentQuestionIndex < 29) {
        showQuestion(currentQuestionIndex + 1);
      } else {
        calculateResult();
      }
    }

    function previousQuestion() {
      if (currentQuestionIndex > 0) {
        showQuestion(currentQuestionIndex - 1);
      }
    }

    function calculateResult() {
      // å„æ¬¡å…ƒã®ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
      let scores = {
        BT: 0, // ãƒœã‚±(é«˜) vs ãƒ„ãƒƒã‚³ãƒŸ(ä½)
        PS: 0, // ãƒ‘ãƒ¯ãƒ¼(é«˜) vs ã‚»ãƒ³ã‚¹(ä½)
        PC: 0, // ãƒ‘ãƒƒã‚·ãƒ§ãƒ³(é«˜) vs ã‚¯ãƒ¼ãƒ«(ä½)
        PA: 0  // ãƒ”ãƒ¼ã‚¹(é«˜) vs ã‚¢ã‚¿ãƒƒã‚¯(ä½)
      };
      
      questions.forEach((q, i) => {
        let score = answers[i];
        // reverseã®å ´åˆã¯ã‚¹ã‚³ã‚¢ã‚’åè»¢
        if (q.reverse) {
          score = 8 - score;
        }
        scores[q.dimension] += score;
      });
      
      // å„æ¬¡å…ƒã§å¤šæ•°æ´¾ã‚’åˆ¤å®š
      const result = {
        BT: scores.BT > 28 ? 'B' : 'T',  // 8å• x 7ç‚¹ / 2 = 28
        PS: scores.PS > 28 ? 'P' : 'S',  // 8å• x 7ç‚¹ / 2 = 28
        PC: scores.PC > 24.5 ? 'P' : 'C', // 7å• x 7ç‚¹ / 2 = 24.5
        PA: scores.PA > 24.5 ? 'P' : 'A'  // 7å• x 7ç‚¹ / 2 = 24.5
      };
      
      const mbtiCode = result.BT + result.PS + result.PC + result.PA;
      showResult(mbtiCode);
    }

    function showResult(mbtiCode) {
      const result = mbtiTypes[mbtiCode];
      
      document.getElementById('questionSection').style.display = 'none';
      document.getElementById('resultCode').textContent = mbtiCode;
      document.getElementById('resultType').textContent = result.name;
      document.getElementById('resultDescription').textContent = result.description;
      
      // ã‚¤ãƒ©ã‚¹ãƒˆã®ãƒ‘ã‚¹ã‚’è¨­å®šï¼ˆå¾Œã§å®Ÿéš›ã®ç”»åƒã‚’é…ç½®ã™ã‚‹æƒ³å®šï¼‰
      resultImage.src = `/images/mbti/${mbtiCode}.png`; // å®Ÿéš›ã®ç”»åƒãƒ‘ã‚¹
      const resultImage = document.getElementById('resultImage');
      
      document.getElementById('resultSection').classList.add('active');
    }

    function restart() {
      currentQuestionIndex = 0;
      answers = new Array(30).fill(null);
      
      document.getElementById('resultSection').classList.remove('active');
      document.getElementById('resultSection').style.display = 'none';
      document.getElementById('startSection').style.display = 'block';
      document.getElementById('progressFill').style.width = '0%';
    }
  </script>
</body>
</html>